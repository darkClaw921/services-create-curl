# Архитектура проекта: Менеджер Systemd-сервисов

## Общая структура проекта

```
services-create-curl/
├── service.sh              # Основной скрипт менеджера сервисов
├── README.md               # Документация пользователя
├── README_cert_https.md    # Документация по HTTPS сертификатам
├── example.png             # Скриншот примера использования
└── architecture.md         # Архитектурная документация
```

## Основные компоненты

### service.sh - Главный исполняемый файл
Bash-скрипт для создания и управления systemd-сервисами с графическим интерфейсом в терминале.

#### Основные функции:

**Инициализация и конфигурация:**
- `init_services_list()` - создает директории и файлы для хранения списка сервисов
- `check_sudo()` - проверяет наличие прав суперпользователя
- `check_command()` - проверяет наличие команд в системе

**Управление уведомлениями:**
- `send_notification()` - отправка уведомлений через Telegram API
- `manage_notifications()` - интерфейс настройки уведомлений

**Создание сервисов:**
- `select_runtime()` - выбор режима запуска (Python, UV, Poetry, PHP, Shell)
- `select_file()` - выбор файла для создания сервиса
- `create_service()` - создание systemd-сервиса и скриптов уведомлений

**Управление сервисами:**
- `manage_services()` - просмотр списка созданных сервисов
- `service_control()` - управление конкретным сервисом
- `view_service_logs()` - просмотр журналов сервиса
- `edit_service_file()` - редактирование конфигурации сервиса

**Пользовательский интерфейс:**
- `show_main_menu()` - главное меню приложения
- `clear_screen()` - очистка экрана

## Поддерживаемые режимы запуска

1. **Python (python3)** - запуск Python-скриптов через системный интерпретатор
2. **UV Manager (uv run)** - запуск через UV менеджер пакетов
3. **Poetry (poetry run python)** - запуск через Poetry менеджер зависимостей
4. **PHP Server (php -S)** - запуск PHP-файлов как веб-сервер
5. **Shell Script (bash)** - запуск shell-скриптов через bash интерпретатор

## Структура данных

### Файлы конфигурации:
- `/var/lib/service-creator/created_services.list` - список созданных сервисов
- `/var/lib/service-creator/notifications/config` - настройки уведомлений
- `/var/lib/service-creator/notifications/{service_name}_notify.sh` - скрипты уведомлений для каждого сервиса

### Системные файлы:
- `/etc/systemd/system/{service_name}.service` - файлы конфигурации systemd

## Интеграции

### Telegram API
- Отправка уведомлений о статусе сервисов
- Отправка файлов логов
- Тестирование уведомлений

### Systemd
- Создание и управление службами
- Автозапуск сервисов
- Журналирование

## Безопасность

- Требует прав суперпользователя для управления системными сервисами
- Проверка корректности ввода пользователя
- Подтверждение критических операций (удаление сервисов)
- Безопасное редактирование конфигурационных файлов

## Цветовая схема интерфейса

- GREEN - успешные операции и активные элементы
- RED - ошибки и неактивные элементы  
- YELLOW - предупреждения и информационные сообщения
- CYAN - пункты меню и заголовки
- BLUE - дополнительная информация
- BOLD - выделение важных элементов 